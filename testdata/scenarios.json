[
  {
    "platform": "unix",
    "name": "this file does not exist.md",
    "result": 1,
    "error": "❗️ testdata/this file does not exist.md: no such file or directory\n"
  },
  {
    "platform": "windows",
    "name": "this file does not exist.md",
    "result": 1,
    "error": "❗️ testdata\\this file does not exist.md: The system cannot find the file specified.\n"
  },
  {
    "name": "heading_change_unknown_heading.md",
    "result": 1,
    "error": "❗️ Validation error: Unknown change headings \"Corrected\" is not one of [Added, Removed, Changed, Deprecated, Fixed, Security]\n"
  },
  {
    "name": "heading_release_not_recognized.md",
    "result": 1,
    "error": "❗️ Validation error: Unknown release header for \"Information missing here\"\n"
  },
  {
    "name": "heading_release_date_wrong.md",
    "result": 1,
    "error": "❗️ Validation error: Illegal date (parsing time \"2020-02-31\": day out of range) for [1.2.3] - 2020-02-31\n"
  },
  {
    "name": "heading_release_yanked_version_brackets.md",
    "result": 1,
    "error": "❗️ Validation error: the version of a [YANKED] release cannot stand between [...] for [1.2.3] - 2020-02-29 [YANKED]\n"
  },
  {
    "name": "heading_release_yanked_date_wrong.md",
    "result": 1,
    "error": "❗️ Validation error: Illegal date (parsing time \"2020-02-31\": day out of range) for 1.2.3 - 2020-02-31 [YANKED]\n"
  },
  {
    "name": "heading_release_yanked_version_wrong.md",
    "result": 1,
    "error": "❗️ Validation error: Illegal version (Minor number must not contain leading zeroes \"02\") for 1.02.3 - 2020-02-28 [YANKED]\n"
  },
  {
    "name": "heading_release_version_wrong.md",
    "result": 1,
    "error": "❗️ Validation error: Illegal version (Minor number must not contain leading zeroes \"02\") for [1.02.3] - 2020-02-01\n"
  },
  {
    "name": "heading_title_empty.md",
    "result": 1,
    "error": "❗️ Validation error: Introduction’s title cannot stay empty\n"
  },
  {
    "name": "sort_date_newer_release_first.md",
    "result": 0
  },
  {
    "name": "sort_date_two_releases_same_day.md",
    "result": 0
  },
  {
    "name": "sort_date_older_release_first.md",
    "result": 1,
    "error": "❗️ Validation error: release \"[1.2.2] - 2020-02-29\" should be older than \"[1.2.3] - 2020-02-28\"\n"
  },
  {
    "name": "sort_date_newer_yanked_first.md",
    "result": 0
  },
  {
    "name": "sort_date_older_yanked_first.md",
    "result": 1,
    "error": "❗️ Validation error: release \"[1.2.2] - 2020-02-29\" should be older than \"1.2.3 - 2020-02-28 [YANKED]\"\n"
  },
  {
    "name": "sort_date_release_newer_than_yanked.md",
    "result": 0
  },
  {
    "name": "sort_date_release_and_yanked_same_day.md",
    "result": 0
  },
  {
    "name": "sort_date_release_older_than_yanked.md",
    "result": 1,
    "error": "❗️ Validation error: release \"1.2.2 - 2020-02-29 [YANKED]\" should be older than \"[1.2.3] - 2020-02-28\"\n"
  },
  {
    "name": "sort_version_increment_major_wrong.md",
    "result": 1,
    "error": "❗️ Release \"[2.0.0] - 2020-02-29\" should have version 1.3.0\n"
  },
  {
    "name": "sort_version_increment_major.md",
    "result": 0
  },
  {
    "name": "sort_version_increment_minor.md",
    "result": 0
  },
  {
    "name": "sort_version_increment_minor_wrong.md",
    "result": 1,
    "error": "❗️ Release \"[1.3.0] - 2020-02-29\" should have version 2.0.0\n"
  },
  {
    "name": "sort_version_increment_patch.md",
    "result": 0
  },
  {
    "name": "sort_version_increment_patch_wrong.md",
    "result": 1,
    "error": "❗️ Release \"[1.2.3] - 2020-02-29\" should have version 2.0.0\n"
  },
  {
    "name": "sort_version_older_yanked_first.md",
    "result": 1,
    "error": "❗️ Validation error: release \"[1.2.3] - 2020-02-28\" should sort before \"1.2.2 - 2020-02-29 [YANKED]\"\n"
  },
  {
    "name": "sort_version_older_release_first.md",
    "result": 1,
    "error": "❗️ Validation error: release \"[1.2.3] - 2020-02-28\" should sort before \"[1.2.2] - 2020-02-29\"\n"
  },
  {
    "name": "unreleased_and_yanked.md",
    "result": 0
  },
  {
    "name": "unreleased_and_yanked.md",
    "arguments": [
      "-release"
    ],
    "result": 1,
    "error": "❗️ Validation error: \"[Unreleased]\" not supported in release mode {Unreleased and Yanked}{[Unreleased]}\n"
  },
  {
    "name": "released_and_yanked.md",
    "result": 0
  },
  {
    "name": "released_and_yanked.md",
    "arguments": [
      "-release"
    ],
    "result": 0
  },
  {
    "name": "no_release_header.md",
    "result": 1,
    "error": "❗️ Validation error: No release defined in changelog\n"
  },
  {
    "name": "duplicate_change_headings.md",
    "result": 1,
    "error": "❗️ Validation error: Multiple headings \"Fixed\" not supported {Duplicate change headings}{[1.2.3] - 2020-02-29}{Fixed}\n"
  },
  {
    "name": "multiple_unreleased.md",
    "result": 1,
    "error": "❗️ Validation error: Multiple \"[Unreleased]\" not supported {Multiple unreleased}{[Unreleased]}\n"
  },
  {
    "name": "unreleased_after_released.md",
    "result": 1,
    "error": "❗️ Validation error: \"[Unreleased]\" must come before any release {Unreleased after released}{[Unreleased]}\n"
  },
  {
    "name": "initial_yanked.md",
    "result": 1,
    "error": "❗️ Validation error: Changelog cannot start with a \"[YANKED]\" release, insert a release or a \"[Unreleased]\" first {Initial Yanked}{1.2.3 - 2020-02-29 [YANKED]}\n"
  },
  {
    "name": "same_version_two_releases.md",
    "result": 1,
    "error": "❗️ Validation error: release \"[1.2.3] - 2020-02-28\" should sort before \"[1.2.3] - 2020-02-29\"\n"
  },
  {
    "name": "same_version_release_and_yanked.md",
    "result": 1,
    "error": "❗️ Validation error: release \"1.2.3 - 2020-02-28 [YANKED]\" should sort before \"[1.2.3] - 2020-02-29\"\n"
  },
  {
    "name": "released_without_changes.md",
    "result": 1,
    "error": "❗️ No change descriptions for {Release without changes}{[1.2.3] - 2020-02-29}\n"
  },
  {
    "name": "released_without_change_description.md",
    "result": 1,
    "error": "❗️ No change descriptions for {Release without change description}{[1.2.3] - 2020-02-29}{Fixed}\n"
  },
  {
    "name": "last_released_without_changes.md",
    "result": 1,
    "error": "❗️ No change descriptions for {Last release without changes}{[1.2.2] - 2020-02-29}\n"
  },
  {
    "name": "last_released_without_change_description.md",
    "result": 1,
    "error": "❗️ No change descriptions for {Last release without change description}{[1.2.2] - 2020-02-29}{Fixed}\n"
  },
  {
    "name": "change_without_change_description.md",
    "result": 1,
    "error": "❗️ No change descriptions for {Change without change description}{[2.0.0] - 2020-02-29}{Fixed}\n"
  },
  {
    "name": "change_with_empty_change_description.md",
    "result": 1,
    "error": "❗️ Validation error: change description cannot stay empty\n"
  },
  {
    "name": "change_without_release.md",
    "result": 1,
    "error": "❗️ Changes must be in a release {Change without release}\n"
  },
  {
    "name": "yanked_without_changes.md",
    "result": 1,
    "error": "❗️ No change descriptions for {Yanked release without changes}{1.2.3 - 2020-02-29 [YANKED]}\n"
  },
  {
    "name": "yanked_without_change_description.md",
    "result": 1,
    "error": "❗️ No change descriptions for {Yanked release without change description}{1.2.3 - 2020-02-29 [YANKED]}{Added}\n"
  },
  {
    "title": "validate with-filename",
    "arguments": [
      "-with-filename",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 0,
    "output": "✅ testdata/sort_date_newer_release_first.md\n"
  },
  {
    "title": "validate failure with-filename",
    "arguments": [
      "-with-filename",
      "testdata/heading_title_empty.md"
    ],
    "result": 1,
    "error": "❗️ testdata/heading_title_empty.md: Validation error: Introduction’s title cannot stay empty\n"
  },
  {
    "title": "query with-filename",
    "arguments": [
      "-with-filename",
      "-query",
      "title",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 0,
    "output": "✅ testdata/sort_date_newer_release_first.md: Sort Date Newer Release First\n"
  },
  {
    "title": "unsupported argument",
    "arguments": [
      "-unsupported"
    ],
    "result": 2,
    "error": "flag provided but not defined: -unsupported\n\nUsage: clq { flags } <path to changelog.md>\n\nOptions are:\n  -output string\n    \tOutput format, for complex result. One of: json|md (default \"json\")\n  -query string\n    \tA query to extract information out of the change log\n  -release\n    \tEnable release-mode validation\n  -version\n    \tPrints clq version\n  -with-filename\n    \tAlways print filename headers with output lines\n"
  },
  {
    "title": "-version",
    "arguments": [
      "-version"
    ],
    "result": 0,
    "output": "clq \n"
  },
  {
    "title": "unsupported query attribute",
    "arguments": [
      "-query",
      "releases[0].foobar"
    ],
    "result": 2,
    "error": "❗️ Query attribute not recognized \"foobar\" for a \"release\"\n"
  },
  {
    "name": "query_release_version.md",
    "arguments": [
      "-query",
      "releases[0].version"
    ],
    "result": 0,
    "output": "1.0.0\n"
  },
  {
    "title": "query first release changes",
    "arguments": [
      "-query",
      "releases[0].changes[]"
    ],
    "input": "# Change log\n## [Unreleased]\n### Added\n- waldo\n- fred\n## [1.0.0] - 2020-06-20\n### Removed\n- foo\n- bar",
    "result": 0,
    "output_format": "json",
    "output": "[{\"title\":\"Added\"}]\n"
  },
  {
    "title": "query first release changes recursive",
    "arguments": [
      "-query",
      "releases[0].changes[]/"
    ],
    "input": "# Change log\n## [Unreleased]\n### Added\n- waldo\n- fred\n## [1.0.0] - 2020-06-20\n### Removed\n- foo\n- bar",
    "result": 0,
    "output_format": "json",
    "output": "[{\"title\":\"Added\", \"descriptions\":[\"waldo\", \"fred\"]}]\n"
  },
  {
    "title": "query last release changes",
    "arguments": [
      "-output",
      "md",
      "-query",
      "releases[1].changes[]/"
    ],
    "input": "# Change log\n## [Unreleased]\n### Added\n- waldo\n- fred\n## [1.0.0] - 2020-06-20\n### Removed\n- foo\n- bar",
    "result": 0,
    "output": "### Removed\n- foo\n- bar\n"
  },
  {
    "title": "query all changes",
    "arguments": [
      "-query",
      "releases[0].changes[]"
    ],
    "input": "# Change log\n## [Unreleased]\n### Added\n- waldo\n- fred\n### Removed\n- foo\n- bar",
    "result": 0,
    "output": "[{\"title\":\"Added\"},{\"title\":\"Removed\"}]\n"
  },
  {
    "title": "query title",
    "arguments": [
      "-query",
      "title"
    ],
    "input": "# Change log\n## [Unreleased]\n### Added\n- dummy",
    "result": 0,
    "output": "Change log\n"
  },
  {
    "platform": "unix",
    "title": "query_release_status_multiple_files",
    "arguments": [
      "-query",
      "releases[0].status",
      "testdata/released_and_yanked.md",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 0,
    "output": "✅ testdata/released_and_yanked.md: released\n✅ testdata/sort_date_newer_release_first.md: released\n"
  },
  {
    "platform": "windows",
    "title": "query_release_status_multiple_files",
    "arguments": [
      "-query",
      "releases[0].status",
      "testdata/released_and_yanked.md",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 0,
    "output": "✅ testdata/released_and_yanked.md: released\n✅ testdata/sort_date_newer_release_first.md: released\n"
  },
  {
    "platform": "unix",
    "title": "one_of_many_file_missing",
    "arguments": [
      "testdata/this file does not exist.md",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 1,
    "error": "❗️ testdata/this file does not exist.md: no such file or directory\n"
  },
  {
    "platform": "windows",
    "title": "one_of_many_file_missing",
    "arguments": [
      "testdata/this file does not exist.md",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 1,
    "error": "❗️ testdata/this file does not exist.md: The system cannot find the file specified.\n"
  },
  {
    "platform": "unix",
    "title": "one_of_many_file_missing_with-filename",
    "arguments": [
      "-with-filename",
      "testdata/this file does not exist.md",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 1,
    "output": "✅ testdata/sort_date_newer_release_first.md\n",
    "error": "❗️ testdata/this file does not exist.md: no such file or directory\n"
  },
  {
    "platform": "windows",
    "title": "one of many file missing with-filename",
    "arguments": [
      "-with-filename",
      "testdata/this file does not exist.md",
      "testdata/sort_date_newer_release_first.md"
    ],
    "result": 1,
    "output": "✅ testdata/sort_date_newer_release_first.md\n",
    "error": "❗️ testdata/this file does not exist.md: The system cannot find the file specified.\n"
  },
  {
    "title": "muliple validation errors",
    "arguments": [
      "testdata/yanked_without_changes.md",
      "testdata/yanked_without_change_description.md"
    ],
    "result": 1,
    "error": "❗️ testdata/yanked_without_changes.md: No change descriptions for {Yanked release without changes}{1.2.3 - 2020-02-29 [YANKED]}\n❗️ testdata/yanked_without_change_description.md: No change descriptions for {Yanked release without change description}{1.2.3 - 2020-02-29 [YANKED]}{Added}\n"
  }
]
